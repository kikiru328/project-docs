# 갑상선암 진단 모델 평가 자동화 시스템
> ⚠️ *해당 프로젝트는 기관 요청에 따라 코드 전체가 비공개(private) 처리되어 있으며, 구현 세부 내용은 README로만 제공됩니다.*

**흉부 CT 영상 기반 갑상선암 진단 모델의 성능을 자동 평가**하는 스크립트 및 리포트 시스템을 개발하였습니다.  
300명 환자 데이터를 대상으로 수행되는 실증 평가 과정의 정량화, 시각화, 자동 리포트 생성을 통해  
**평가 시간은 75% 이상 단축**, **신뢰성과 반복성 향상**이라는 성과를 도출하였습니다.

## 개요

- 기간: 2023.03 ~ 2024.04
- 역할: 평가 자동화 시스템 개발 및 실증 환경 설계
- 기술 스택: Python, Scikit-learn, Numpy, Matplotlib, PyTorch, DICOM, Docker, Linux

## 프로젝트 배경

- 실증 평가 과정이 수작업 → **평균 40분 이상 소요 + 일관성 부족**
- 반복 실험, 모델 비교, 기준 평가 모두 사람이 직접 수행
- 고해상도 CT 이미지로 인한 **GPU OOM 오류** 빈번 발생

## 문제 정의

| 문제 | 설명 |
|------|------|
| 수작업 평가 | 결과 비교 및 리포트 작성 수동 처리 |
| 시각적 직관성 부족 | CT/마스크/GT 정합 시각화 기능 없음 |
| 메모리 과부하 | 고해상도 이미지 처리 중 OOM 발생 |


## 해결 방안 요약

| 항목 | 구현 내용 |
|------|-----------|
| 정량 평가 자동화 | Dice, IoU, Sensitivity 등 지표 자동 계산 |
| 결과 시각화 | 추론 마스크 + GT 오버레이 이미지 생성 |
| 리포트 자동 생성 | 환자별/전체 PDF 리포트 자동 출력 |
| 병렬 처리 | 슬라이스 단위 멀티프로세싱 처리 |
| 메모리 최적화 | 중간 캐싱 제거 및 GPU usage 제어｜

## 시스템 구조

![Image](https://github.com/user-attachments/assets/ec57c954-73a0-46fa-94c9-60017b53a80f)

1. 3D Image + Ground Truth 입력
2. 모델 추론
3. 시각화 이미지 자동 저장
4. PDF 또는 Excel 기반 리포트 생성

## 성과 요약

| 항목 | 개선 전 | 개선 후 |
|------|---------|----------|
| 평가 시간 | 평균 2시간 | **30분 이내** |
| 반복성 | 수동 수행 | **자동 스크립트화** |
| 시각화 | 수동 편집 필요 | **자동 이미지 및 리포트 생성** |
| GPU 메모리 오류 | OOM 빈번 | **병렬 처리 구조로 완전 해소** |

![Image](https://github.com/user-attachments/assets/1f0c6e92-44a7-4279-a49c-b6fe0e664edb)

## 주요 기능 상세

### 평가 지표 계산 자동화

- Dice coefficient, IoU, Precision, Sensitivity 등
- 환자별 / 전체 평균 자동 통계 출력

### 시각화

- 예측 마스크 vs GT 오버레이 이미지 생성
- CT 이미지 기준 슬라이스별 시각 비교 제공

### 병렬 처리 및 최적화

- `multiprocessing` 기반 슬라이스 단위 평가
- `torch.no_grad()` + 중간 결과 캐싱 제거
- OOM 발생 지점 제거 및 GPU 안정화
